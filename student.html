<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–ª—è —É—á–µ–Ω–∏–∫–æ–≤ - –ü—Ä–æ–≥—Ä–µ—Å—Å</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="telegram-app">
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fab fa-telegram"></i>
                    <span>–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
                </div>
                <button class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <div class="sidebar-search">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="–ü–æ–∏—Å–∫...">
                </div>
            </div>
            
            <div class="sidebar-menu">
                <a href="index.html" class="menu-item">
                    <i class="fas fa-home"></i>
                    <span>–ì–ª–∞–≤–Ω–∞—è</span>
                </a>
                <a href="tutor.html" class="menu-item">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <span>–î–ª—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤</span>
                </a>
                <a href="student.html" class="menu-item active">
                    <i class="fas fa-user-graduate"></i>
                    <span>–î–ª—è —É—á–µ–Ω–∏–∫–æ–≤</span>
                </a>
                <a href="features.html" class="menu-item">
                    <i class="fas fa-star"></i>
                    <span>–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª</span>
                </a>
                <a href="contacts.html" class="menu-item">
                    <i class="fas fa-phone"></i>
                    <span>–ö–æ–Ω—Ç–∞–∫—Ç—ã</span>
                </a>
            </div>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="avatar">–ü</div>
                    <div class="user-details">
                        <span class="user-name">–£—á–µ–Ω–∏–∫: –ò–≤–∞–Ω–æ–≤ –ò.–ò.</span>
                        <span class="user-status">–æ–Ω–ª–∞–π–Ω</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="content-header">
                <h1><i class="fas fa-user-graduate"></i> –î–ª—è —É—á–µ–Ω–∏–∫–æ–≤</h1>
                <div class="theme-toggle">
                    <i class="fas fa-moon"></i>
                </div>
            </div>
            
            <div class="chat-container">
                <!-- –ß–∞—Ç —Å –±–æ—Ç–æ–º -->
                <div class="telegram-chat" id="chatContainer">
                    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ -->
                    <div class="message bot-message" id="welcomeMessage">
                        <div class="message-avatar">–ü</div>
                        <div class="message-content">
                            <div class="message-sender">–ë–æ—Ç "–ü—Ä–æ–≥—Ä–µ—Å—Å"</div>
                            <div class="message-text">
                                <p>üëã <strong>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, —É—á–µ–Ω–∏–∫!</strong></p>
                                <p>–≠—Ç–æ –≤–∞—à –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è —Å —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞–º–∏.</p>
                                <div class="student-info" id="studentInfo">
                                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JS -->
                                </div>
                                <p>üëá <strong>–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —É—á–µ–Ω–∏–∫–∞:</strong></p>
                            </div>
                            
                            <!-- –ò–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é -->
                            <div class="inline-buttons" id="mainMenu">
                                <div class="button-row">
                                    <button class="inline-button" onclick="showSection('assignments')">
                                        üìù –ú–æ–∏ –∑–∞–¥–∞–Ω–∏—è
                                    </button>
                                    <button class="inline-button" onclick="showSection('materials')">
                                        üìö –ú–∞—Ç–µ—Ä–∏–∞–ª—ã
                                    </button>
                                </div>
                                <div class="button-row">
                                    <button class="inline-button" onclick="showSection('stats')">
                                        üìà –ú–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å
                                    </button>
                                    <button class="inline-button" onclick="showSection('tutors')">
                                        üë®‚Äçüè´ –†–µ–ø–µ—Ç–∏—Ç–æ—Ä—ã
                                    </button>
                                </div>
                                <div class="button-row">
                                    <button class="inline-button" onclick="showSection('profile')">
                                        ‚öôÔ∏è –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
                                    </button>
                                    <button class="inline-button primary" onclick="showSection('addTutor')">
                                        ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞
                                    </button>
                                </div>
                            </div>
                            
                            <div class="message-time" id="welcomeTime"></div>
                        </div>
                    </div>
                    
                    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏ -->
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                    
                    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π -->
                    <div id="messageContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== –û–°–ù–û–í–ù–´–ï –£–¢–ò–õ–ò–¢–´ =====
        function getCurrentTime() {
            const now = new Date();
            return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
        }

        function createBotMessage(content) {
            const message = document.createElement('div');
            message.className = 'message bot-message';
            message.innerHTML = `
                <div class="message-avatar">–ü</div>
                <div class="message-content">
                    <div class="message-sender">–ë–æ—Ç "–ü—Ä–æ–≥—Ä–µ—Å—Å"</div>
                    <div class="message-text">${content}</div>
                    <div class="message-time">${getCurrentTime()}</div>
                </div>
            `;
            return message;
        }

        function createUserMessage(content) {
            const message = document.createElement('div');
            message.className = 'message user-message';
            message.style.marginLeft = 'auto';
            message.style.marginRight = '0';
            message.style.maxWidth = '75%';
            message.innerHTML = `
                <div class="message-content">
                    <div class="message-sender">–í—ã</div>
                    <div class="message-text">${content}</div>
                    <div class="message-time">${getCurrentTime()}</div>
                </div>
            `;
            return message;
        }

        // ===== –§–£–ù–ö–¶–ò–ò –ü–†–û–ö–†–£–¢–ö–ò =====
        function scrollToElement(element) {
            const chatContainer = document.querySelector('.chat-container');
            if (!chatContainer || !element) return;
            
            setTimeout(() => {
                const containerRect = chatContainer.getBoundingClientRect();
                const elementRect = element.getBoundingClientRect();
                
                const isInView = (
                    elementRect.top >= containerRect.top &&
                    elementRect.bottom <= containerRect.bottom
                );
                
                if (!isInView) {
                    const scrollTop = element.offsetTop - chatContainer.offsetTop - 50;
                    chatContainer.scrollTo({
                        top: Math.max(0, scrollTop),
                        behavior: 'smooth'
                    });
                }
            }, 50);
        }

        function scrollToBottom() {
            const chatContainer = document.querySelector('.chat-container');
            if (chatContainer) {
                setTimeout(() => {
                    chatContainer.scrollTo({
                        top: chatContainer.scrollHeight,
                        behavior: 'smooth'
                    });
                }, 100);
            }
        }

        function showTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.style.opacity = '1';
            typingIndicator.style.height = 'auto';
            scrollToBottom();
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.style.opacity = '0';
            setTimeout(() => {
                typingIndicator.style.height = '0';
            }, 300);
        }

        // ===== –î–ê–ù–ù–´–ï –£–ß–ï–ù–ò–ö–ê =====
        let studentData = {
            fullName: "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
            tutors: [
                {
                    id: 1,
                    name: "–ü–µ—Ç—Ä–æ–≤–∞ –ú–∞—Ä–∏—è –°–µ—Ä–≥–µ–µ–≤–Ω–∞",
                    subject: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞",
                    active: true
                },
                {
                    id: 2,
                    name: "–°–∏–¥–æ—Ä–æ–≤ –ê–ª–µ–∫—Å–µ–π –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á",
                    subject: "–§–∏–∑–∏–∫–∞",
                    active: true
                }
            ],
            currentTutorId: 1,
            assignments: {
                active: 3,
                overdue: 1,
                submitted: 12,
                checking: 1
            },
            progress: 80.0,
            recentActivity: "–°–µ–≥–æ–¥–Ω—è –≤ 14:30"
        };

        // ===== –§–£–ù–ö–¶–ò–ò –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –†–ê–ó–î–ï–õ–û–í =====
        function updateStudentInfo() {
            const currentTutor = studentData.tutors.find(t => t.id === studentData.currentTutorId);
            const studentInfo = document.getElementById('studentInfo');
            
            if (currentTutor) {
                studentInfo.innerHTML = `
                    <div class="tutor-info">
                        <strong>üë®‚Äçüè´ –¢–µ–∫—É—â–∏–π —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä:</strong> ${currentTutor.name}<br>
                        <strong>üìö –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞:</strong> ${currentTutor.subject}
                    </div>
                `;
            } else {
                studentInfo.innerHTML = `
                    <div class="warning-info">
                        ‚ö†Ô∏è <strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã</strong>
                    </div>
                `;
            }
        }

        function showSection(sectionName) {
            const messageContainer = document.getElementById('messageContainer');
            const typingIndicator = document.getElementById('typingIndicator');
            
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            messageContainer.innerHTML = '';
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                let sectionMessage;
                
                switch(sectionName) {
                    case 'assignments':
                        const currentTutor = studentData.tutors.find(t => t.id === studentData.currentTutorId);
                        sectionMessage = createBotMessage(`
                            üìù <strong>–ú–æ–∏ –∑–∞–¥–∞–Ω–∏—è</strong><br><br>
                            ${currentTutor ? `
                                <div class="tutor-header">
                                    <strong>–†–µ–ø–µ—Ç–∏—Ç–æ—Ä:</strong> ${currentTutor.name}<br>
                                    <strong>–ü—Ä–µ–¥–º–µ—Ç:</strong> ${currentTutor.subject}
                                </div><br>
                            ` : ''}
                            
                            üìä <strong>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–¥–∞–Ω–∏–π:</strong><br>
                            <div class="assignments-stats">
                                <div class="stat-row">
                                    <span class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã–µ:</span>
                                    <span class="stat-value active">${studentData.assignments.active}</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ:</span>
                                    <span class="stat-value overdue">${studentData.assignments.overdue}</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">–°–¥–∞–Ω–æ:</span>
                                    <span class="stat-value submitted">${studentData.assignments.submitted}</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ:</span>
                                    <span class="stat-value checking">${studentData.assignments.checking}</span>
                                </div>
                            </div><br>
                            
                            üìã <strong>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π:</strong><br>
                            <div class="assignments-list">
                                <div class="assignment-item overdue">
                                    <strong>#42 - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ Student</strong><br>
                                    <span>üìÖ –°—Ä–æ–∫: 18.12.2025 21:00 (–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ)</span>
                                </div>
                                <div class="assignment-item active">
                                    <strong>#43 - –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –≤ Python</strong><br>
                                    <span>üìÖ –°—Ä–æ–∫: 20.12.2025 18:00 (–æ—Å—Ç–∞–ª–æ—Å—å 2 –¥–Ω—è)</span>
                                </div>
                                <div class="assignment-item active">
                                    <strong>#44 - –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</strong><br>
                                    <span>üìÖ –°—Ä–æ–∫: 22.12.2025 15:00 (–æ—Å—Ç–∞–ª–æ—Å—å 4 –¥–Ω—è)</span>
                                </div>
                            </div><br>
                            
                            <div class="inline-buttons">
                                <button class="inline-button" onclick="showMainMenu()">
                                    ‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é
                                </button>
                                <button class="inline-button primary" onclick="submitAssignment()">
                                    üì§ –°–¥–∞—Ç—å —Ä–∞–±–æ—Ç—É
                                </button>
                            </div>
                        `);
                        break;
                        
                    case 'materials':
                        const activeTutor = studentData.tutors.find(t => t.active);
                        sectionMessage = createBotMessage(`
                            üìö <strong>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</strong><br><br>
                            ${activeTutor ? `
                                <div class="materials-header">
                                    <strong>–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –æ—Ç:</strong> ${activeTutor.name}<br>
                                    <strong>–ü–æ –ø—Ä–µ–¥–º–µ—Ç—É:</strong> ${activeTutor.subject}
                                </div><br>
                            ` : ''}
                            
                            üìÅ <strong>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:</strong><br>
                            <div class="materials-structure">
                                <div class="folder">
                                    üìÅ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ (–æ—Ç ${activeTutor?.name || '—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞'})
                                    <div class="subfolder">
                                        ‚îú‚îÄ‚îÄ üìÅ –ê–ª–≥–µ–±—Ä–∞
                                        <div class="subfolder">
                                        ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ –¢–µ–æ—Ä–∏—è —É—Ä–∞–≤–Ω–µ–Ω–∏–π.pdf
                                        <br>‚îÇ   ‚îú‚îÄ‚îÄ üìÑ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏.doc
                                        <br>‚îÇ   ‚îî‚îÄ‚îÄ üé• –í–∏–¥–µ–æ—É—Ä–æ–∫ –ø–æ —Ç–µ–º–µ
                                        </div>
                                        <br>‚îî‚îÄ‚îÄ üìÅ –ì–µ–æ–º–µ—Ç—Ä–∏—è
                                    </div>
                                </div>
                            </div><br>
                            
                            üí° <strong>–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:</strong><br>
                            <div class="inline-buttons">
                                <button class="inline-button">
                                    üì• –°–∫–∞—á–∞—Ç—å –≤—Å–µ
                                </button>
                                <button class="inline-button">
                                    üîç –ü–æ–∏—Å–∫ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º
                                </button>
                            </div><br>
                            
                            <div class="inline-buttons">
                                <button class="inline-button" onclick="showMainMenu()">
                                    ‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é
                                </button>
                                <button class="inline-button primary" onclick="requestNewMaterials()">
                                    üì¨ –ó–∞–ø—Ä–æ—Å–∏—Ç—å –Ω–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
                                </button>
                            </div>
                        `);
                        break;
                        
                    case 'stats':
                        sectionMessage = createBotMessage(`
                            üìà <strong>–ú–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</strong><br><br>
                            
                            üéØ <strong>–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:</strong><br>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${studentData.progress}%"></div>
                                <span class="progress-text">${studentData.progress}%</span>
                            </div><br>
                            
                            üìä <strong>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π:</strong><br>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-number">15</div>
                                    <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–¥–∞–Ω–∏–π</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">12</div>
                                    <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">3</div>
                                    <div class="stat-label">–í —Ä–∞–±–æ—Ç–µ</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">1</div>
                                    <div class="stat-label">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ</div>
                                </div>
                            </div><br>
                            
                            üìà <strong>–£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å –ø–æ —Ç–µ–º–∞–º:</strong><br>
                            <div class="topics-stats">
                                <div class="topic-item excellent">
                                    <span class="topic-name">–û—Å–Ω–æ–≤—ã Python</span>
                                    <span class="topic-score">95.0%</span>
                                </div>
                                <div class="topic-item good">
                                    <span class="topic-name">–†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏</span>
                                    <span class="topic-score">90.0%</span>
                                </div>
                                <div class="topic-item average">
                                    <span class="topic-name">–°–ø–∏—Å–∫–∏ –∏ –∫–æ—Ä—Ç–µ–∂–∏</span>
                                    <span class="topic-score">85.0%</span>
                                </div>
                                <div class="topic-item poor">
                                    <span class="topic-name">–û–û–ü</span>
                                    <span class="topic-score">60.0%</span>
                                </div>
                                <div class="topic-item poor">
                                    <span class="topic-name">–ê–ª–≥–æ—Ä–∏—Ç–º—ã</span>
                                    <span class="topic-score">45.0%</span>
                                </div>
                            </div><br>
                            
                            üí° <strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</strong><br>
                            <div class="recommendations">
                                <p>‚úÖ –û—Ç–ª–∏—á–Ω–æ! –¢—ã —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ!</p>
                                <p>üìö –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º —É–¥–µ–ª–∏—Ç—å –±–æ–ª—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è —Ç–µ–º–µ "–ê–ª–≥–æ—Ä–∏—Ç–º—ã"</p>
                                <p>‚è∞ –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: ${studentData.recentActivity}</p>
                            </div><br>
                            
                            <div class="inline-buttons">
                                <button class="inline-button" onclick="showMainMenu()">
                                    ‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é
                                </button>
                                <button class="inline-button primary" onclick="exportStats()">
                                    üì• –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                                </button>
                            </div>
                        `);
                        break;
                        
                    case 'tutors':
                        sectionMessage = createBotMessage(`
                            üë®‚Äçüè´ <strong>–†–µ–ø–µ—Ç–∏—Ç–æ—Ä—ã</strong><br><br>
                            
                            üìã <strong>–°–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤:</strong><br>
                            <div class="tutors-list">
                                ${studentData.tutors.map(tutor => `
                                    <div class="tutor-item ${tutor.id === studentData.currentTutorId ? 'current' : ''}">
                                        <div class="tutor-header">
                                            <strong>${tutor.name}</strong>
                                            ${tutor.id === studentData.currentTutorId ? '<span class="current-badge">–¢–µ–∫—É—â–∏–π</span>' : ''}
                                        </div>
                                        <div class="tutor-details">
                                            <span>üìö ${tutor.subject}</span>
                                            <span>${tutor.active ? '‚úÖ –ê–∫—Ç–∏–≤–µ–Ω' : '‚è∏Ô∏è –ù–µ–∞–∫—Ç–∏–≤–µ–Ω'}</span>
                                        </div>
                                        <div class="tutor-actions">
                                            ${tutor.id !== studentData.currentTutorId ? `
                                                <button class="inline-button small" onclick="switchTutor(${tutor.id})">
                                                    üëÜ –°–¥–µ–ª–∞—Ç—å —Ç–µ–∫—É—â–∏–º
                                                </button>
                                            ` : ''}
                                            <button class="inline-button small ${tutor.id === studentData.currentTutorId ? 'danger' : ''}" 
                                                    onclick="${tutor.id === studentData.currentTutorId ? 'removeCurrentTutor()' : 'removeTutor(' + tutor.id + ')'}">
                                                ${tutor.id === studentData.currentTutorId ? '‚ùå –û—Ç–∫–ª—é—á–∏—Ç—å' : 'üóëÔ∏è –£–¥–∞–ª–∏—Ç—å'}
                                            </button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div><br>
                            
                            ‚ÑπÔ∏è <strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:</strong><br>
                            <ul class="notes-list">
                                <li>‚Ä¢ –¢–µ–∫—É—â–∏–π —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä - –æ—Å–Ω–æ–≤–Ω–æ–π, —Å –∫–æ—Ç–æ—Ä—ã–º –≤—ã —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç–µ</li>
                                <li>‚Ä¢ –í—ã –º–æ–∂–µ—Ç–µ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤ –ø–æ —Ä–∞–∑–Ω—ã–º –ø—Ä–µ–¥–º–µ—Ç–∞–º</li>
                                <li>‚Ä¢ –î–ª—è —Å–º–µ–Ω—ã —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞ –Ω–∞–∂–º–∏—Ç–µ "–°–¥–µ–ª–∞—Ç—å —Ç–µ–∫—É—â–∏–º"</li>
                            </ul><br>
                            
                            <div class="inline-buttons">
                                <button class="inline-button" onclick="showMainMenu()">
                                    ‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é
                                </button>
                                <button class="inline-button primary" onclick="showSection('addTutor')">
                                    ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞
                                </button>
                            </div>
                        `);
                        break;
                        
                    case 'profile':
                        sectionMessage = createBotMessage(`
                            ‚öôÔ∏è <strong>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</strong><br><br>
                            
                            üë§ <strong>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong><br>
                            <div class="profile-info">
                                <div class="profile-field">
                                    <span class="field-label">üìõ –§–ò–û:</span>
                                    <span class="field-value">${studentData.fullName}</span>
                                </div>
                                <div class="profile-field">
                                    <span class="field-label">üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã:</span>
                                    <span class="field-value">+7 (999) 123-45-67, student@mail.ru</span>
                                </div>
                                <div class="profile-field">
                                    <span class="field-label">üë®‚Äçüè´ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤:</span>
                                    <span class="field-value">${studentData.tutors.length}</span>
                                </div>
                                <div class="profile-field">
                                    <span class="field-label">üìä –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:</span>
                                    <span class="field-value">${studentData.progress}%</span>
                                </div>
                                <div class="profile-field">
                                    <span class="field-label">üïí –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</span>
                                    <span class="field-value">${studentData.recentActivity}</span>
                                </div>
                            </div><br>
                            
                            üîß <strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º:</strong><br>
                            <div class="inline-buttons">
                                <button class="inline-button" onclick="editProfile()">
                                    ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                                </button>
                                <button class="inline-button" onclick="changeContacts()">
                                    üì± –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã
                                </button>
                            </div>
                            <div class="inline-buttons">
                                <button class="inline-button" onclick="changePassword()">
                                    üîí –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
                                </button>
                                <button class="inline-button danger" onclick="deleteAccount()">
                                    üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                                </button>
                            </div><br>
                            
                            <div class="inline-buttons">
                                <button class="inline-button" onclick="showMainMenu()">
                                    ‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é
                                </button>
                            </div>
                        `);
                        break;
                        
                    case 'addTutor':
                        sectionMessage = createBotMessage(`
                            ‚ûï <strong>–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞</strong><br><br>
                            
                            üîë <strong>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ —Ç–æ–∫–µ–Ω—É:</strong><br>
                            <p>–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞ –≤–∞–º –Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä.</p>
                            
                            <div class="token-instructions">
                                <strong>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong><br>
                                1. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω –≤ —Ä–∞–∑–¥–µ–ª–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞"<br>
                                2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω (—Ñ–æ—Ä–º–∞—Ç: ABCD-EFGH)<br>
                                3. –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –Ω–∏–∂–µ<br>
                                4. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
                            </div><br>
                            
                            <div class="input-wrapper">
                                <input type="text" id="tutorToken" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: ABCD-EFGH)" 
                                       onkeypress="handleTokenEnter(event)">
                                <button class="inline-button small" onclick="submitToken()">
                                    –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                                </button>
                            </div><br>
                            
                            <div class="example-token">
                                <strong>–ü—Ä–∏–º–µ—Ä —Ç–æ–∫–µ–Ω–∞:</strong><br>
                                <code>ABCD-1234</code> –∏–ª–∏ <code>EFGH-5678</code>
                            </div><br>
                            
                            ‚ÑπÔ∏è <strong>–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong><br>
                            <ul class="notes-list">
                                <li>‚Ä¢ –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 1 —á–∞—Å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è</li>
                                <li>‚Ä¢ –û–¥–∏–Ω —Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑</li>
                                <li>‚Ä¢ –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä –ø–æ—è–≤–∏—Ç—Å—è –≤ –≤–∞—à–µ–º —Å–ø–∏—Å–∫–µ</li>
                                <li>‚Ä¢ –í—ã –º–æ–∂–µ—Ç–µ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤</li>
                            </ul><br>
                            
                            <div class="inline-buttons">
                                <button class="inline-button" onclick="showMainMenu()">
                                    ‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é
                                </button>
                                <button class="inline-button" onclick="resendTokenInstructions()">
                                    üìß –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
                                </button>
                            </div>
                        `);
                        break;
                }
                
                messageContainer.appendChild(sectionMessage);
                setTimeout(() => {
                    scrollToElement(sectionMessage);
                }, 150);
                
            }, 800);
        }

        function showMainMenu() {
            const messageContainer = document.getElementById('messageContainer');
            messageContainer.innerHTML = '';
            
            setTimeout(() => {
                const welcomeMessage = document.getElementById('welcomeMessage');
                scrollToElement(welcomeMessage);
            }, 50);
        }

        // ===== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –í–ó–ê–ò–ú–û–î–ï–ô–°–¢–í–ò–Ø =====
        function submitAssignment() {
            const messageContainer = document.getElementById('messageContainer');
            const userMessage = createUserMessage("–°–¥–∞—Ç—å —Ä–∞–±–æ—Ç—É");
            messageContainer.appendChild(userMessage);
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const submitMessage = createBotMessage(`
                    üì§ <strong>–°–¥–∞—á–∞ —Ä–∞–±–æ—Ç—ã</strong><br><br>
                    –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ—Ç–ø—Ä–∞–≤–∫–∏:<br><br>
                    <div class="inline-buttons">
                        <button class="inline-button" onclick="submitPhoto()">
                            üì∏ –§–æ—Ç–æ
                        </button>
                        <button class="inline-button" onclick="submitDocument()">
                            üìÑ –î–æ–∫—É–º–µ–Ω—Ç
                        </button>
                        <button class="inline-button" onclick="submitText()">
                            üìù –¢–µ–∫—Å—Ç
                        </button>
                    </div><br>
                    <div class="inline-buttons">
                        <button class="inline-button" onclick="showSection('assignments')">
                            ‚Üê –û—Ç–º–µ–Ω–∞
                        </button>
                    </div>
                `);
                messageContainer.appendChild(submitMessage);
                setTimeout(() => {
                    scrollToElement(submitMessage);
                }, 150);
            }, 800);
        }

        function submitPhoto() {
            const messageContainer = document.getElementById('messageContainer');
            messageContainer.innerHTML += `
                <div class="simulated-attachment">
                    üì∏ <em>–°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ...</em>
                </div>
            `;
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const successMessage = createBotMessage(`
                    ‚úÖ <strong>–†–∞–±–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!</strong><br><br>
                    <div class="submission-info">
                        <strong>–ß—Ç–æ —Å–¥–∞–Ω–æ:</strong> –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ Student<br>
                        <strong>–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏:</strong> ${getCurrentTime()}<br>
                        <strong>–¢–∏–ø —Ä–∞–±–æ—Ç—ã:</strong> –§–æ—Ç–æ<br><br>
                        üìù <em>–ó–∞–¥–∞–Ω–∏–µ –æ–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–º.<br>
                        –í—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞.</em>
                    </div><br>
                    <div class="inline-buttons">
                        <button class="inline-button" onclick="showSection('assignments')">
                            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∑–∞–¥–∞–Ω–∏—è–º
                        </button>
                    </div>
                `);
                messageContainer.appendChild(successMessage);
                setTimeout(() => {
                    scrollToElement(successMessage);
                }, 150);
            }, 1500);
        }

        function requestNewMaterials() {
            const messageContainer = document.getElementById('messageContainer');
            const userMessage = createUserMessage("–ó–∞–ø—Ä–æ—Å–∏—Ç—å –Ω–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã");
            messageContainer.appendChild(userMessage);
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const requestMessage = createBotMessage(`
                    üì¨ <strong>–ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!</strong><br><br>
                    –í–∞—à —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–ø—Ä–æ—Å–µ –Ω–æ–≤—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.<br>
                    –û–±—ã—á–Ω–æ –æ—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.<br><br>
                    <div class="inline-buttons">
                        <button class="inline-button" onclick="showSection('materials')">
                            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º
                        </button>
                    </div>
                `);
                messageContainer.appendChild(requestMessage);
                setTimeout(() => {
                    scrollToElement(requestMessage);
                }, 150);
            }, 800);
        }

        function exportStats() {
            const messageContainer = document.getElementById('messageContainer');
            const userMessage = createUserMessage("–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É");
            messageContainer.appendChild(userMessage);
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const exportMessage = createBotMessage(`
                    üì• <strong>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞!</strong><br><br>
                    <div class="export-options">
                        <strong>–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:</strong><br>
                        ‚Ä¢ PDF –æ—Ç—á–µ—Ç (–¥–ª—è –ø–æ–∫–∞–∑–∞ —Ä–æ–¥–∏—Ç–µ–ª—è–º)<br>
                        ‚Ä¢ Excel —Ç–∞–±–ª–∏—Ü–∞ (–¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞)<br>
                        ‚Ä¢ –ì—Ä–∞—Ñ–∏–∫–∏ (PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)<br>
                        ‚Ä¢ –¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç<br><br>
                        <em>–í —Ä–µ–∞–ª—å–Ω–æ–º –±–æ—Ç–µ –∑–¥–µ—Å—å –±—ã–ª–∏ –±—ã –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã —Ñ–∞–π–ª—ã</em>
                    </div><br>
                    <div class="inline-buttons">
                        <button class="inline-button" onclick="showSection('stats')">
                            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
                        </button>
                    </div>
                `);
                messageContainer.appendChild(exportMessage);
                setTimeout(() => {
                    scrollToElement(exportMessage);
                }, 150);
            }, 800);
        }

        function switchTutor(tutorId) {
            studentData.currentTutorId = tutorId;
            updateStudentInfo();
            
            const messageContainer = document.getElementById('messageContainer');
            const userMessage = createUserMessage("–°–¥–µ–ª–∞—Ç—å —Ç–µ–∫—É—â–∏–º —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–º");
            messageContainer.appendChild(userMessage);
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const successMessage = createBotMessage(`
                    ‚úÖ <strong>–¢–µ–∫—É—â–∏–π —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä –∏–∑–º–µ–Ω–µ–Ω!</strong><br><br>
                    –¢–µ–ø–µ—Ä—å –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–º –∫–∞–∫ —Å –æ—Å–Ω–æ–≤–Ω—ã–º.<br><br>
                    <div class="inline-buttons">
                        <button class="inline-button" onclick="showSection('tutors')">
                            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞–º
                        </button>
                    </div>
                `);
                messageContainer.appendChild(successMessage);
                setTimeout(() => {
                    scrollToElement(successMessage);
                }, 150);
            }, 800);
        }

        function removeTutor(tutorId) {
            if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞ –∏–∑ —Å–ø–∏—Å–∫–∞?")) {
                studentData.tutors = studentData.tutors.filter(t => t.id !== tutorId);
                
                const messageContainer = document.getElementById('messageContainer');
                const userMessage = createUserMessage("–£–¥–∞–ª–∏—Ç—å —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞");
                messageContainer.appendChild(userMessage);
                
                showTypingIndicator();
                
                setTimeout(() => {
                    hideTypingIndicator();
                    const successMessage = createBotMessage(`
                        ‚úÖ <strong>–†–µ–ø–µ—Ç–∏—Ç–æ—Ä —É–¥–∞–ª–µ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞!</strong><br><br>
                        –í—ã –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –æ—Ç —ç—Ç–æ–≥–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞.<br><br>
                        <div class="inline-buttons">
                            <button class="inline-button" onclick="showSection('tutors')">
                                ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞–º
                            </button>
                        </div>
                    `);
                    messageContainer.appendChild(successMessage);
                    setTimeout(() => {
                        scrollToElement(successMessage);
                    }, 150);
                }, 800);
            }
        }

        function removeCurrentTutor() {
            if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–∫–ª—é—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞? –≠—Ç–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤–∞—à–µ –æ–±—É—á–µ–Ω–∏–µ.")) {
                studentData.tutors = studentData.tutors.filter(t => t.id !== studentData.currentTutorId);
                studentData.currentTutorId = studentData.tutors[0]?.id || null;
                updateStudentInfo();
                
                const messageContainer = document.getElementById('messageContainer');
                const userMessage = createUserMessage("–û—Ç–∫–ª—é—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞");
                messageContainer.appendChild(userMessage);
                
                showTypingIndicator();
                
                setTimeout(() => {
                    hideTypingIndicator();
                    const successMessage = createBotMessage(`
                        ‚ö†Ô∏è <strong>–¢–µ–∫—É—â–∏–π —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä –æ—Ç–∫–ª—é—á–µ–Ω!</strong><br><br>
                        –í—ã –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –æ—Ç —ç—Ç–æ–≥–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞.<br>
                        ${studentData.currentTutorId ? '–î—Ä—É–≥–æ–π —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ —Ç–µ–∫—É—â–∏–π.' : '–£ –≤–∞—Å –±–æ–ª—å—à–µ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤.'}<br><br>
                        <div class="inline-buttons">
                            <button class="inline-button" onclick="showSection('tutors')">
                                ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞–º
                            </button>
                        </div>
                    `);
                    messageContainer.appendChild(successMessage);
                    setTimeout(() => {
                        scrollToElement(successMessage);
                    }, 150);
                }, 800);
            }
        }

        function editProfile() {
            const messageContainer = document.getElementById('messageContainer');
            const userMessage = createUserMessage("–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å");
            messageContainer.appendChild(userMessage);
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const editMessage = createBotMessage(`
                    ‚úèÔ∏è <strong>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</strong><br><br>
                    <div class="input-wrapper">
                        <input type="text" id="newName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –§–ò–û" value="${studentData.fullName}">
                        <button class="inline-button small" onclick="saveProfile()">
                            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                    </div><br>
                    <div class="inline-buttons">
                        <button class="inline-button" onclick="showSection('profile')">
                            ‚Üê –û—Ç–º–µ–Ω–∞
                        </button>
                    </div>
                `);
                messageContainer.appendChild(editMessage);
                setTimeout(() => {
                    scrollToElement(editMessage);
                    document.getElementById('newName').focus();
                }, 150);
            }, 800);
        }

        function saveProfile() {
            const newName = document.getElementById('newName').value.trim();
            if (newName && newName.length >= 2) {
                studentData.fullName = newName;
                updateStudentInfo();
                
                const messageContainer = document.getElementById('messageContainer');
                const userMessage = createUserMessage(newName);
                messageContainer.appendChild(userMessage);
                
                showTypingIndicator();
                
                setTimeout(() => {
                    hideTypingIndicator();
                    const successMessage = createBotMessage(`
                        ‚úÖ <strong>–ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω!</strong><br><br>
                        <div class="inline-buttons">
                            <button class="inline-button" onclick="showSection('profile')">
                                ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª—å
                            </button>
                        </div>
                    `);
                    messageContainer.appendChild(successMessage);
                    setTimeout(() => {
                        scrollToElement(successMessage);
                    }, 150);
                }, 800);
            } else {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –§–ò–û (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)");
            }
        }

        function handleTokenEnter(event) {
            if (event.key === 'Enter') {
                submitToken();
            }
        }
        const menuToggle = document.querySelector('.menu-toggle');
            const sidebar = document.querySelector('.sidebar');
            
            if (menuToggle) {
                menuToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('mobile-open');
                });
            }

        function submitToken() {
            const token = document.getElementById('tutorToken').value.trim();
            if (!token || token.length < 8) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω (–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤)");
                return;
            }
            
            const messageContainer = document.getElementById('messageContainer');
            const userMessage = createUserMessage(`–¢–æ–∫–µ–Ω: ${token}`);
            messageContainer.appendChild(userMessage);
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞
                if (Math.random() > 0.3) { // 70% —É—Å–ø–µ—à–Ω—ã—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏–π
                    const newTutorId = studentData.tutors.length + 1;
                    studentData.tutors.push({
                        id: newTutorId,
                        name: "–ù–æ–≤—ã–π –†–µ–ø–µ—Ç–∏—Ç–æ—Ä",
                        subject: "–ù–æ–≤—ã–π –ü—Ä–µ–¥–º–µ—Ç",
                        active: true
                    });
                    
                    const successMessage = createBotMessage(`
                        ‚úÖ <strong>–ù–æ–≤—ã–π —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä –¥–æ–±–∞–≤–ª–µ–Ω!</strong><br><br>
                        <div class="new-tutor-info">
                            <strong>–†–µ–ø–µ—Ç–∏—Ç–æ—Ä:</strong> –ù–æ–≤—ã–π –†–µ–ø–µ—Ç–∏—Ç–æ—Ä<br>
                            <strong>–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞:</strong> –ù–æ–≤—ã–π –ü—Ä–µ–¥–º–µ—Ç<br><br>
                            –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è –ø–æ —ç—Ç–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ.
                        </div><br>
                        <div class="inline-buttons">
                            <button class="inline-button" onclick="showSection('addTutor')">
                                ‚Üê –î–æ–±–∞–≤–∏—Ç—å –µ—â–µ
                            </button>
                            <button class="inline-button primary" onclick="showSection('tutors')">
                                üë®‚Äçüè´ –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞–º
                            </button>
                        </div>
                    `);
                    messageContainer.appendChild(successMessage);
                } else {
                    const errorMessage = createBotMessage(`
                        ‚ùå <strong>–¢–æ–∫–µ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–ª.</strong><br><br>
                        –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Ç–æ—á–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω —É –≤–∞—à–µ–≥–æ —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞.<br><br>
                        <div class="inline-buttons">
                            <button class="inline-button" onclick="showSection('addTutor')">
                                ‚Üê –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                            </button>
                        </div>
                    `);
                    messageContainer.appendChild(errorMessage);
                }
                
                setTimeout(() => {
                    scrollToBottom();
                }, 150);
            }, 1500);
        }

        function resendTokenInstructions() {
            const messageContainer = document.getElementById('messageContainer');
            const userMessage = createUserMessage("–ó–∞–ø—Ä–æ—Å–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é");
            messageContainer.appendChild(userMessage);
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                const instructionsMessage = createBotMessage(`
                    üìß <strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!</strong><br><br>
                    –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é —Ç–æ–∫–µ–Ω–∞ –≤–∞—à–µ–º—É —Ç–µ–∫—É—â–µ–º—É —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—É.<br>
                    –¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—É:<br><br>
                    
                    <div class="instructions-box">
                        <strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞:</strong><br>
                        1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ @ProgressTutorBot<br>
                        2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "üë®‚Äçüéì –ú–æ–∏ —É—á–µ–Ω–∏–∫–∏"<br>
                        3. –ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞"<br>
                        4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞<br>
                        5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω —É—á–µ–Ω–∏–∫—É
                    </div><br>
                    
                    <div class="inline-buttons">
                        <button class="inline-button" onclick="showSection('addTutor')">
                            ‚Üê –ù–∞–∑–∞–¥
                        </button>
                    </div>
                `);
                messageContainer.appendChild(instructionsMessage);
                setTimeout(() => {
                    scrollToElement(instructionsMessage);
                }, 150);
            }, 800);
        }

        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('welcomeTime').textContent = getCurrentTime();
            updateStudentInfo();
            
            const welcomeMessage = document.getElementById('welcomeMessage');
            setTimeout(() => {
                welcomeMessage.style.opacity = '1';
                welcomeMessage.style.transform = 'translateY(0)';
            }, 300);
            
            setInterval(() => {
                const timeElement = document.getElementById('welcomeTime');
                if (timeElement) {
                    timeElement.textContent = getCurrentTime();
                }
            }, 60000);
        });
    </script>

    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É—á–µ–Ω–∏–∫–∞ */
        .student-info {
            background: rgba(0, 122, 255, 0.1);
            border-radius: 10px;
            padding: 12px;
            margin: 10px 0;
            border-left: 3px solid #007aff;
        }
        
        .tutor-info {
            font-size: 13px;
        }
        
        .warning-info {
            background: rgba(255, 149, 0, 0.1);
            border-radius: 10px;
            padding: 10px;
            border-left: 3px solid #ff9500;
        }
        
        .button-row {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .input-wrapper {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        
        .input-wrapper input {
            flex: 1;
            padding: 10px 14px;
            background: rgba(118, 118, 128, 0.12);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 14px;
        }
        
        .input-wrapper input:focus {
            outline: none;
            border-color: var(--text-accent);
            box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.15);
        }
        
        .inline-button.small {
            padding: 6px 10px;
            font-size: 11px;
        }
        
        .inline-button.danger {
            background: rgba(255, 59, 48, 0.1);
            color: #ff3b30;
            border-color: #ff3b30;
        }
        
        .inline-button.danger:hover {
            background: rgba(255, 59, 48, 0.2);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–æ–≤ */
        .tutor-header, .materials-header {
            background: rgba(118, 118, 128, 0.08);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 13px;
        }
        
        .assignments-stats {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 15px;
            border: 1px solid var(--border-light);
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid rgba(118, 118, 128, 0.1);
        }
        
        .stat-row:last-child {
            border-bottom: none;
        }
        
        .stat-label {
            font-weight: 500;
        }
        
        .stat-value {
            font-weight: 700;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
        }
        
        .stat-value.active {
            background: rgba(52, 199, 89, 0.2);
            color: #34c759;
        }
        
        .stat-value.overdue {
            background: rgba(255, 59, 48, 0.2);
            color: #ff3b30;
        }
        
        .stat-value.submitted {
            background: rgba(0, 122, 255, 0.2);
            color: #007aff;
        }
        
        .stat-value.checking {
            background: rgba(255, 149, 0, 0.2);
            color: #ff9500;
        }
        
        .assignments-list {
            background: rgba(118, 118, 128, 0.08);
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
        }
        
        .assignment-item {
            padding: 10px;
            margin: 8px 0;
            background: var(--bg-card);
            border-radius: 8px;
            border-left: 4px solid;
        }
        
        .assignment-item.overdue {
            border-left-color: #ff3b30;
            background: rgba(255, 59, 48, 0.05);
        }
        
        .assignment-item.active {
            border-left-color: #007aff;
            background: rgba(0, 122, 255, 0.05);
        }
        
        .assignment-item.submitted {
            border-left-color: #34c759;
            background: rgba(52, 199, 89, 0.05);
        }
        
        .materials-structure {
            font-family: monospace;
            font-size: 13px;
            background: rgba(118, 118, 128, 0.08);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border-light);
        }
        
        .folder {
            padding-left: 10px;
        }
        
        .subfolder {
            padding-left: 20px;
            color: var(--text-secondary);
        }
        
        .progress-bar {
            height: 24px;
            background: rgba(118, 118, 128, 0.2);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007aff, #5856d6);
            transition: width 0.5s ease;
        }
        
        .progress-text {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        
        .stat-card {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--border-light);
        }
        
        .stat-card .stat-number {
            font-size: 24px;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }
        
        .stat-card .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .topics-stats {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--border-light);
        }
        
        .topic-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 8px;
            font-size: 13px;
        }
        
        .topic-item.excellent {
            background: rgba(52, 199, 89, 0.1);
            border-left: 3px solid #34c759;
        }
        
        .topic-item.good {
            background: rgba(0, 122, 255, 0.1);
            border-left: 3px solid #007aff;
        }
        
        .topic-item.average {
            background: rgba(255, 149, 0, 0.1);
            border-left: 3px solid #ff9500;
        }
        
        .topic-item.poor {
            background: rgba(255, 59, 48, 0.1);
            border-left: 3px solid #ff3b30;
        }
        
        .topic-score {
            font-weight: 700;
        }
        
        .recommendations {
            background: rgba(0, 122, 255, 0.08);
            padding: 12px;
            border-radius: 10px;
            border-left: 3px solid #007aff;
            font-size: 13px;
        }
        
        .tutors-list {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--border-light);
        }
        
        .tutor-item {
            padding: 12px;
            margin: 10px 0;
            background: rgba(118, 118, 128, 0.08);
            border-radius: 10px;
        }
        
        .tutor-item.current {
            background: rgba(0, 122, 255, 0.1);
            border: 1px solid rgba(0, 122, 255, 0.3);
        }
        
        .tutor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .current-badge {
            background: #007aff;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .tutor-details {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }
        
        .tutor-actions {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }
        
        .notes-list {
            list-style: none;
            padding-left: 0;
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .notes-list li {
            margin-bottom: 6px;
            padding-left: 15px;
            position: relative;
        }
        
        .notes-list li:before {
            content: '‚Ä¢';
            position: absolute;
            left: 0;
            color: var(--text-accent);
        }
        
        .profile-info {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--border-light);
        }
        
        .profile-field {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(118, 118, 128, 0.1);
        }
        
        .profile-field:last-child {
            border-bottom: none;
        }
        
        .field-label {
            font-weight: 500;
            color: var(--text-secondary);
        }
        
        .field-value {
            font-weight: 500;
            text-align: right;
            max-width: 60%;
        }
        
        .token-instructions {
            background: rgba(0, 122, 255, 0.08);
            padding: 12px;
            border-radius: 10px;
            border-left: 3px solid #007aff;
            font-size: 13px;
            margin: 10px 0;
        }
        
        .example-token {
            background: rgba(118, 118, 128, 0.08);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .example-token code {
            font-family: monospace;
            background: rgba(0, 0, 0, 0.2);
            padding: 4px 8px;
            border-radius: 4px;
            margin: 0 4px;
        }
        
        .instructions-box {
            background: rgba(255, 149, 0, 0.08);
            padding: 12px;
            border-radius: 10px;
            border-left: 3px solid #ff9500;
            font-size: 13px;
            margin: 10px 0;
        }
        
        .simulated-attachment {
            background: rgba(118, 118, 128, 0.08);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
        }
        
        .submission-info {
            background: rgba(52, 199, 89, 0.08);
            padding: 12px;
            border-radius: 10px;
            border-left: 3px solid #34c759;
        }
        
        .new-tutor-info {
            background: rgba(0, 122, 255, 0.08);
            padding: 12px;
            border-radius: 10px;
            border-left: 3px solid #007aff;
        }
        
        .export-options {
            background: rgba(255, 149, 0, 0.08);
            padding: 12px;
            border-radius: 10px;
            border-left: 3px solid #ff9500;
        }
        
        .user-message .message-content {
            background: linear-gradient(135deg, #007aff, #5856d6);
            color: white;
        }
        
        .user-message .message-sender {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .user-message .message-time {
            color: rgba(255, 255, 255, 0.7);
        }
        
        @media (max-width: 768px) {
            .button-row {
                flex-direction: column;
            }
            
            .input-wrapper {
                flex-direction: column;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .tutor-details {
                flex-direction: column;
                gap: 4px;
            }
            
            .tutor-actions {
                flex-direction: column;
            }
            
            .profile-field {
                flex-direction: column;
                gap: 4px;
            }
            
            .field-value {
                max-width: 100%;
                text-align: left;
            }
        }
    </style>
</body>
</html>